local player = game.Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local Lighting = game:GetService("Lighting")
local replicatedStorage = game:GetService("ReplicatedStorage")

local autoSellRunning = false
local autoClickerRunning = false
local fpsBoostEnabled = false
local clickerDelay = 0.05
local activeIsland = nil
local clickPosition = nil
local settingClickPosition = false
local fishCount = 0
local autoSellThreshold = 500

local autoFishWasOn = false
local autoSellWasOn = false
local autoClickerWasOn = false
local fpsBoostWasOn = false

local gui
local clickIndicator
local autoClickerToggle
local closeBtn
local allGuiElements = {}
local protectedElements = {}
local originalLightingSettings = {}

local configPath = "LaudyaaaConfig_" .. player.UserId .. ".json"

local islands = {
    { Name = "Esoteric Depths", Position = Vector3.new(3201.89, -1302.85, 1433.71), LookAt = Vector3.new(3300, -1300, 400) },
    { Name = "Treasure Room", Position = Vector3.new(-3611.89, -279.07, -1589.51), LookAt = Vector3.new(-3619.21, -286.53, -1602.57) },
    { Name = "Lost Isle", Position = Vector3.new(-3738.2, -135.1, -1011.9), LookAt = Vector3.new(-3600, -135, -1200) },
}

local function saveSettings()
    if writefile then
        local data = {
            autoFish = autoFishWasOn,
            autoSell = autoSellWasOn,
            autoClicker = autoClickerWasOn,
            fpsBoost = fpsBoostWasOn,
            clickDelay = clickerDelay > 0 and math.floor(1 / clickerDelay) or 20,
            teleportIndex = nil
        }
        if activeIsland then
            for i, v in ipairs(islands) do
                if v == activeIsland then
                    data.teleportIndex = i
                    break
                end
            end
        end
        writefile(configPath, HttpService:JSONEncode(data))
    end
end

local function loadSettings()
    if readfile and isfile and isfile(configPath) then
        local ok, content = pcall(function() return readfile(configPath) end)
        if ok and content then
            local decoded = nil
            pcall(function() decoded = HttpService:JSONDecode(content) end)
            if decoded and type(decoded) == "table" then
                autoFishWasOn = decoded.autoFish or false
                autoSellWasOn = decoded.autoSell or false
                autoClickerWasOn = decoded.autoClicker or false
                fpsBoostWasOn = decoded.fpsBoost or false
                clickerDelay = (decoded.clickDelay and decoded.clickDelay > 0) and (1 / decoded.clickDelay) or 0.05
                if decoded.teleportIndex and islands[decoded.teleportIndex] then
                    activeIsland = islands[decoded.teleportIndex]
                end
            end
        end
    end
end

loadSettings()

local function getFishCount()
    local count = 0
    pcall(function()
        for _, gui in pairs(player.PlayerGui:GetDescendants()) do
            if (gui:IsA("TextLabel") or gui:IsA("TextButton")) and gui.Visible then
                local currentFish = gui.Text:match("(%d+)/")
                if currentFish then
                    local fishNum = tonumber(currentFish)
                    if fishNum and fishNum > count then
                        count = fishNum
                    end
                end
            end
        end
    end)
    return count
end

local function sellAllFish()
    pcall(function()
        local net = replicatedStorage:FindFirstChild("Packages")
        if not net then return end
        local idx = net:FindFirstChild("_Index")
        if not idx then return end
        local sleitnick = idx:FindFirstChild("sleitnick_net@0.2.0")
        if not sleitnick then return end
        local netFolder = sleitnick:FindFirstChild("net")
        if not netFolder then return end
        for _, remote in ipairs(netFolder:GetDescendants()) do
            if remote:IsA("RemoteFunction") or remote:IsA("RemoteEvent") then
                local name = remote.Name:lower()
                if name:find("sell") and not name:find("buy") then
                    pcall(function()
                        if remote:IsA("RemoteFunction") then
                            remote:InvokeServer()
                        else
                            remote:FireServer()
                        end
                    end)
                    task.wait(0.5)
                end
            end
        end
    end)
end

local function autoSellLoop()
    task.spawn(function()
        while autoSellRunning do
            task.wait(15)
            fishCount = getFishCount()
            if fishCount >= autoSellThreshold then
                sellAllFish()
                task.wait(3)
            end
        end
    end)
end

local function enableAutoFish()
    task.spawn(function()
        local char = player.Character
        if not char then return end

        local hasRod = false
        for _, tool in pairs(char:GetChildren()) do
            if tool:IsA("Tool") and tool.Name:lower():find("rod") then
                hasRod = true
                break
            end
        end

        if not hasRod then
            for _, tool in pairs(player.Backpack:GetChildren()) do
                if tool:IsA("Tool") and tool.Name:lower():find("rod") then
                    char.Humanoid:EquipTool(tool)
                    hasRod = true
                    break
                end
            end
        end

        if not hasRod then
            game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.One, false, game)
            task.wait(0.3)
        end

        task.wait(0.5)

        local net = replicatedStorage:FindFirstChild("Packages")
        if net then
            local idx = net:FindFirstChild("_Index")
            if idx then
                local sleitnick = idx:FindFirstChild("sleitnick_net@0.2.0")
                if sleitnick then
                    local netFolder = sleitnick:FindFirstChild("net")
                    if netFolder then
                        local rfFolder = netFolder:FindFirstChild("RF/UpdateAutoFishingState")
                        if rfFolder and rfFolder:IsA("RemoteFunction") then
                            task.wait(0.5)
                            pcall(function() rfFolder:InvokeServer(true) end)
                        end
                    end
                end
            end
        end
    end)
end

local function enableFPSBoost()
    originalLightingSettings = {
        Brightness = Lighting.Brightness,
        GlobalShadows = Lighting.GlobalShadows,
        OutdoorAmbient = Lighting.OutdoorAmbient,
        Technology = Lighting.Technology,
        FogEnd = Lighting.FogEnd,
        FogStart = Lighting.FogStart,
    }

    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level01
    Lighting.GlobalShadows = false
    Lighting.Brightness = 2
    Lighting.OutdoorAmbient = Color3.fromRGB(200, 200, 200)
    Lighting.Technology = Enum.Technology.Compatibility
    Lighting.FogEnd = 100
    Lighting.FogStart = 0

    for _, effect in ipairs(Lighting:GetChildren()) do
        pcall(function()
            if effect:IsA("PostEffect") or effect:IsA("BloomEffect") or effect:IsA("BlurEffect") or
                effect:IsA("ColorCorrectionEffect") or effect:IsA("SunRaysEffect") or
                effect:IsA("DepthOfFieldEffect") then
                effect.Enabled = false
            elseif effect:IsA("Atmosphere") or effect:IsA("Sky") then
                effect:Destroy()
            end
        end)
    end

    task.spawn(function()
        for _, obj in pairs(workspace:GetDescendants()) do
            pcall(function()
                if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or
                    obj:IsA("Fire") or obj:IsA("Sparkles") or obj:IsA("PointLight") or
                    obj:IsA("SpotLight") or obj:IsA("SurfaceLight") then
                    obj.Enabled = false
                elseif obj:IsA("BasePart") then
                    obj.CastShadow = false
                    obj.Material = Enum.Material.SmoothPlastic
                    obj.Reflectance = 0
                elseif obj:IsA("Decal") or obj:IsA("Texture") then
                    obj.Transparency = 1
                elseif obj:IsA("MeshPart") then
                    obj.RenderFidelity = Enum.RenderFidelity.Performance
                    obj.Material = Enum.Material.SmoothPlastic
                    obj.CastShadow = false
                end
            end)
        end
    end)

    pcall(function()
        workspace.Terrain.WaterTransparency = 1
        workspace.Terrain.WaterReflectance = 0
        workspace.Terrain.WaterWaveSize = 0
        workspace.Terrain.WaterWaveSpeed = 0
    end)

    UserSettings():GetService("UserGameSettings").SavedQualityLevel = Enum.SavedQualitySetting.QualityLevel1
end

local function disableFPSBoost()
    if originalLightingSettings.Brightness then
        Lighting.Brightness = originalLightingSettings.Brightness
        Lighting.GlobalShadows = originalLightingSettings.GlobalShadows
        Lighting.OutdoorAmbient = originalLightingSettings.OutdoorAmbient
        Lighting.Technology = originalLightingSettings.Technology or Enum.Technology.ShadowMap
        Lighting.FogEnd = originalLightingSettings.FogEnd or 100000
        Lighting.FogStart = originalLightingSettings.FogStart or 0
    end

    settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic

    for _, effect in ipairs(Lighting:GetChildren()) do
        if effect:IsA("PostEffect") then
            effect.Enabled = true
        end
    end

    pcall(function()
        workspace.Terrain.WaterTransparency = 0.3
        workspace.Terrain.WaterReflectance = 1
        workspace.Terrain.WaterWaveSize = 0.15
        workspace.Terrain.WaterWaveSpeed = 10
    end)
end

local function teleportAndFace()
    local char = player.Character
    if not (char and char:FindFirstChild("HumanoidRootPart") and activeIsland) then return end

    local hrp = char.HumanoidRootPart
    hrp.CFrame = CFrame.new(activeIsland.Position + Vector3.new(0, 5, 0))
    task.wait(0.4)

    local waterPart = nil
    local shortestDist = math.huge

    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Name:lower():find("water") then
            local dist = (obj.Position - hrp.Position).Magnitude
            if dist < shortestDist and dist < 300 then
                shortestDist = dist
                waterPart = obj
            end
        end
    end

    if waterPart then
        hrp.CFrame = CFrame.lookAt(hrp.Position, waterPart.Position)
    else
        hrp.CFrame = CFrame.lookAt(hrp.Position, activeIsland.LookAt)
    end
end

local function isMouseOverGui()
    if not gui then return false end
    local mousePos = UserInputService:GetMouseLocation()
    local guiObjects = player.PlayerGui:GetGuiObjectsAtPosition(mousePos.X, mousePos.Y)
    for _, obj in ipairs(guiObjects) do
        if obj:IsDescendantOf(gui) then
            return true
        end
    end
    return false
end

local function setGuiInteractable(enabled)
    for _, element in ipairs(allGuiElements) do
        if element and element.Parent then
            local isProtected = false
            for _, protected in ipairs(protectedElements) do
                if element == protected then
                    isProtected = true
                    break
                end
            end

            if not isProtected and element:GetAttribute("OriginalTransparency") then
                element.BackgroundTransparency = enabled and element:GetAttribute("OriginalTransparency") or 0.7
            end
        end
    end
end

local function stopAutoClicker()
    autoClickerRunning = false
    setGuiInteractable(true)

    if not settingClickPosition then
        clickIndicator.Visible = false
    end

    if autoClickerToggle then
        local sliderBg = autoClickerToggle:FindFirstChild("Frame")
        local knob = sliderBg and sliderBg:FindFirstChild("Frame")
        if sliderBg and knob then
            TweenService:Create(sliderBg, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(100, 100, 115)}):Play()
            TweenService:Create(knob, TweenInfo.new(0.2), {Position = UDim2.new(0, 3, 0.5, -11)}):Play()
        end
    end
end

local function autoClickerLoop()
    task.spawn(function()
        while autoClickerRunning do
            pcall(function()
                if clickPosition and closeBtn then
                    local closePos = closeBtn.AbsolutePosition
                    local closeSize = closeBtn.AbsoluteSize
                    local shouldClick = not (
                        clickPosition.X >= closePos.X and
                        clickPosition.X <= closePos.X + closeSize.X and
                        clickPosition.Y >= closePos.Y and
                        clickPosition.Y <= closePos.Y + closeSize.Y
                    )

                    if shouldClick then
                        local VirtualInputManager = game:GetService("VirtualInputManager")
                        VirtualInputManager:SendMouseButtonEvent(clickPosition.X, clickPosition.Y, 0, true, game, 0)
                        task.wait(0.01)
                        VirtualInputManager:SendMouseButtonEvent(clickPosition.X, clickPosition.Y, 0, false, game, 0)
                    end
                elseif not isMouseOverGui() then
                    mouse1click()
                end
            end)
            task.wait(clickerDelay)
        end
    end)
end

UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 and autoClickerRunning then
        stopAutoClicker()
    end
end)

local function createCategoryHeader(parent, text, posY)
    local header = Instance.new("TextLabel", parent)
    header.Size = UDim2.new(1, -40, 0, 30)
    header.Position = UDim2.new(0, 20, 0, posY)
    header.Text = text
    header.TextColor3 = Color3.fromRGB(180, 190, 255)
    header.Font = Enum.Font.GothamBold
    header.TextSize = 14
    header.BackgroundTransparency = 1
    header.TextXAlignment = Enum.TextXAlignment.Left
    return header
end

local function createModernToggle(parent, labelText, posY, onToggleCallback)
    local toggleWidth, toggleHeight = 52, 28
    local holder = Instance.new("TextButton", parent)
    holder.Size = UDim2.new(1, -40, 0, 45)
    holder.Position = UDim2.new(0, 20, 0, posY)
    holder.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    holder.BackgroundTransparency = 0.3
    holder.BorderSizePixel = 0
    holder.Text = ""
    holder.AutoButtonColor = false
    holder:SetAttribute("OriginalTransparency", 0.3)

    Instance.new("UICorner", holder).CornerRadius = UDim.new(0, 8)

    local stroke = Instance.new("UIStroke", holder)
    stroke.Color = Color3.fromRGB(70, 70, 85)
    stroke.Thickness = 1
    stroke.Transparency = 0.4

    local label = Instance.new("TextLabel", holder)
    label.Size = UDim2.new(1, -toggleWidth - 30, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.Text = labelText
    label.TextColor3 = Color3.fromRGB(220, 220, 230)
    label.Font = Enum.Font.Gotham
    label.TextSize = 15
    label.BackgroundTransparency = 1
    label.TextXAlignment = Enum.TextXAlignment.Left

    local sliderBg = Instance.new("Frame", holder)
    sliderBg.Size = UDim2.new(0, toggleWidth, 0, toggleHeight)
    sliderBg.Position = UDim2.new(1, -toggleWidth - 15, 0.5, -toggleHeight / 2)
    sliderBg.BackgroundColor3 = Color3.fromRGB(100, 100, 115)
    sliderBg.BorderSizePixel = 0
    sliderBg.ZIndex = 2
    Instance.new("UICorner", sliderBg).CornerRadius = UDim.new(1, 0)

    local knob = Instance.new("Frame", sliderBg)
    knob.Size = UDim2.new(0, toggleHeight - 6, 0, toggleHeight - 6)
    knob.Position = UDim2.new(0, 3, 0.5, -(toggleHeight - 6) / 2)
    knob.BackgroundColor3 = Color3.fromRGB(240, 240, 245)
    knob.BorderSizePixel = 0
    knob.ZIndex = 3
    Instance.new("UICorner", knob).CornerRadius = UDim.new(1, 0)

    local isOn = false
    local function setVisual(state)
        if state then
            TweenService:Create(sliderBg, TweenInfo.new(0.2), { BackgroundColor3 = Color3.fromRGB(88, 101, 242) }):Play()
            TweenService:Create(knob, TweenInfo.new(0.2), { Position = UDim2.new(1, -(toggleHeight - 3), 0.5, -(toggleHeight - 6) / 2) }):Play()
        else
            TweenService:Create(sliderBg, TweenInfo.new(0.2), { BackgroundColor3 = Color3.fromRGB(100, 100, 115) }):Play()
            TweenService:Create(knob, TweenInfo.new(0.2), { Position = UDim2.new(0, 3, 0.5, -(toggleHeight - 6) / 2) }):Play()
        end
    end

    holder.MouseButton1Click:Connect(function()
        isOn = not isOn
        setVisual(isOn)
        if onToggleCallback then
            onToggleCallback(isOn, holder)
            saveSettings()
        end
    end)

    setVisual(false)
    table.insert(allGuiElements, holder)
    return holder
end

local function createSlider(parent, labelText, posY, minVal, maxVal, defaultVal, onValueChanged)
    local holder = Instance.new("Frame", parent)
    holder.Size = UDim2.new(1, -40, 0, 65)
    holder.Position = UDim2.new(0, 20, 0, posY)
    holder.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    holder.BackgroundTransparency = 0.3
    holder.BorderSizePixel = 0

    Instance.new("UICorner", holder).CornerRadius = UDim.new(0, 8)

    local stroke = Instance.new("UIStroke", holder)
    stroke.Color = Color3.fromRGB(70, 70, 85)
    stroke.Thickness = 1
    stroke.Transparency = 0.4

    local label = Instance.new("TextLabel", holder)
    label.Size = UDim2.new(1, -70, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 5)
    label.Text = labelText
    label.TextColor3 = Color3.fromRGB(220, 220, 230)
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.BackgroundTransparency = 1
    label.TextXAlignment = Enum.TextXAlignment.Left

    local valueLabel = Instance.new("TextLabel", holder)
    valueLabel.Size = UDim2.new(0, 60, 0, 25)
    valueLabel.Position = UDim2.new(1, -70, 0, 5)
    valueLabel.Text = tostring(defaultVal) .. " CPS"
    valueLabel.TextColor3 = Color3.fromRGB(180, 190, 255)
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextSize = 13
    valueLabel.BackgroundTransparency = 1

    local sliderFrame = Instance.new("Frame", holder)
    sliderFrame.Size = UDim2.new(1, -30, 0, 6)
    sliderFrame.Position = UDim2.new(0, 15, 0, 38)
    sliderFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 75)
    sliderFrame.BorderSizePixel = 0
    Instance.new("UICorner", sliderFrame).CornerRadius = UDim.new(1, 0)

    local sliderFill = Instance.new("Frame", sliderFrame)
    sliderFill.Size = UDim2.new((defaultVal - minVal) / (maxVal - minVal), 0, 1, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    sliderFill.BorderSizePixel = 0
    Instance.new("UICorner", sliderFill).CornerRadius = UDim.new(1, 0)

    local sliderButton = Instance.new("TextButton", sliderFrame)
    sliderButton.Size = UDim2.new(0, 16, 0, 16)
    sliderButton.Position = UDim2.new((defaultVal - minVal) / (maxVal - minVal), -8, 0.5, -8)
    sliderButton.BackgroundColor3 = Color3.fromRGB(240, 240, 245)
    sliderButton.Text = ""
    sliderButton.BorderSizePixel = 0
    Instance.new("UICorner", sliderButton).CornerRadius = UDim.new(1, 0)

    local dragging = false
    local function updateSlider(pos)
        local sliderPos = sliderFrame.AbsolutePosition.X
        local sliderSize = sliderFrame.AbsoluteSize.X
        local percentage = math.clamp((pos - sliderPos) / sliderSize, 0, 1)
        local value = math.floor(minVal + (maxVal - minVal) * percentage)
        sliderButton.Position = UDim2.new(percentage, -8, 0.5, -8)
        sliderFill.Size = UDim2.new(percentage, 0, 1, 0)
        valueLabel.Text = tostring(value) .. " CPS"
        if onValueChanged then
            onValueChanged(value)
            saveSettings()
        end
    end

    sliderButton.MouseButton1Down:Connect(function()
        dragging = true
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            updateSlider(input.Position.X)
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)

    table.insert(allGuiElements, sliderButton)
    return holder
end

local function buildUI()
    if gui then return end

    gui = Instance.new("ScreenGui", player.PlayerGui)
    gui.Name = "LaudyaaaGui"
    gui.ResetOnSpawn = false

    local scaleX = math.clamp(workspace.CurrentCamera.ViewportSize.X / 1100, 0.6, 1)
    local scaleY = math.clamp(workspace.CurrentCamera.ViewportSize.Y / 700, 0.6, 1)
    local scale = math.min(scaleX, scaleY)

    local mainFrame = Instance.new("Frame", gui)
    mainFrame.Size = UDim2.new(0, 440 * scale, 0, 308 * scale)
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    mainFrame.BackgroundColor3 = Color3.fromRGB(26, 28, 35)
    mainFrame.BorderSizePixel = 0
    Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12 * scale)

    local titleLabel = Instance.new("TextLabel", mainFrame)
    titleLabel.Size = UDim2.new(1, -44 * scale, 0, 34 * scale)
    titleLabel.Position = UDim2.new(0, 20 * scale, 0, 6 * scale)
    titleLabel.Text = "ðŸ¦‹ Laudyaaa"
    titleLabel.TextColor3 = Color3.fromRGB(180, 190, 255)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 18 * scale
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left

    closeBtn = Instance.new("TextButton", mainFrame)
    closeBtn.Size = UDim2.new(0, 34 * scale, 0, 34 * scale)
    closeBtn.Position = UDim2.new(1, -42 * scale, 0, 7 * scale)
    closeBtn.Text = "âœ•"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 16 * scale
    closeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    closeBtn.TextColor3 = Color3.fromRGB(220, 220, 230)
    Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 11 * scale)
    closeBtn.MouseButton1Click:Connect(function() mainFrame.Visible = false end)
    table.insert(protectedElements, closeBtn)
    
    createCategoryHeader(featuresPage, "PERFORMANCE", 380)
    createModernToggle(featuresPage, "FPS Boost", 415, function(isOn)
        fpsBoostWasOn = isOn
        fpsBoostEnabled = isOn
        if isOn then enableFPSBoost() else disableFPSBoost() end
    end)

    local startY = 20
    for i, island in ipairs(islands) do
        createModernToggle(teleportPage, island.Name, startY + (i-1)*60, function(isOn, clickedToggle)
            if isOn then
                for _, child in ipairs(teleportPage:GetChildren()) do
                    if child:IsA("TextButton") and child ~= clickedToggle then
                        local otherSlider = child:FindFirstChild("Frame")
                        if otherSlider then
                            local otherKnob = otherSlider:FindFirstChild("Frame")
                            if otherKnob then
                                TweenService:Create(otherSlider, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(100, 100, 115)}):Play()
                                TweenService:Create(otherKnob, TweenInfo.new(0.2), {Position = UDim2.new(0, 3, 0.5, -11)}):Play()
                            end
                        end
                    end
                end
                activeIsland = island
                teleportAndFace()
            end
        end)
    end

    local logoBtn = Instance.new("TextButton", gui)
    logoBtn.Size = UDim2.new(0, 40, 0, 40)
    logoBtn.Position = UDim2.new(0, 15, 0.85, 0)
    logoBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
    logoBtn.Text = "ðŸ¦‹"
    logoBtn.TextSize = 20
    Instance.new("UICorner", logoBtn).CornerRadius = UDim.new(0, 10)
    logoBtn.Visible = false
    logoBtn.MouseButton1Click:Connect(function() mainFrame.Visible = true end)
    mainFrame:GetPropertyChangedSignal("Visible"):Connect(function() logoBtn.Visible = not mainFrame.Visible end)

    local function makeDraggable(frame)
        local dragging, dragStart, startPos = false
        frame.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging = true
                dragStart = input.Position
                startPos = frame.Position
                input.Changed:Connect(function()
                    if input.UserInputState == Enum.UserInputState.End then dragging = false end
                end)
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                local delta = input.Position - dragStart
                frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
            end
        end)
    end
    
    makeDraggable(mainFrame)
    makeDraggable(logoBtn)
    showPage(infoPage)
end

buildUI()

player.CharacterAdded:Connect(function()
    task.wait(2)
    if autoFishWasOn then enableAutoFish() end
    if autoSellWasOn then autoSellRunning = true; autoSellLoop() end
    if autoClickerWasOn then autoClickerRunning = true; autoClickerLoop() end
    if fpsBoostWasOn then enableFPSBoost() end
    if activeIsland then teleportAndFace() end
end)
